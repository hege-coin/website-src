# Hegecoin website source code

This repo holds the source files for the Hegecoin website, found at
[hegecoin.com](https://hegecoin.com).

It's a static website, built using [Hugo](https://gohugo.io/).

The static site generated by Hugo is served by Cloudflare Pages, from a separate
Git repo: [website-prod].

## Dependencies

Developing the site requires:

- Git, any recent version should do.
- Hugo >= 0.151, extended version ([gohugo.io](https://gohugo.io/)).

Additionally, building a release and publishing it requires:

- Tidy >= 5.8.0 ([html-tidy.org](https://www.html-tidy.org/)).
- Write access to the [website-prod] repository.

## Developing locally

To develop the site locally, use `hugo` to run a local server:

```sh
hugo server
```

## Building and publishing

To build and publish the site, use this script:

```sh
./build-prod-and-deploy.sh
```

Or if you want to first build and then deploy manually:

```sh
./build-prod.sh
cd output-build/
git add --all
git commit -m "{message}"
git push -u origin main
```

The `build-prod.sh` script will first run `hugo`, which writes its output to
`public/`. It will then copy this output to `output-build/`, apply some post
processing to tidy up the HTML, and copy in a few other files from
`output-base/`.

The content of `output-build/` is version controlled in a separate Git repo,
stored in `build-git-prod/`. This repo is what is used to host the site on
Cloudflare Pages. See [website-prod].

## Development version

The development version works exactly the same as the production version, only
that it deploys to [website-dev] instead of [website-prod].

Use `build-dev-and-deploy.sh` to build and deploy it. This requires write access
to the [website-dev] repo.

[website-prod]: https://github.com/hege-coin/website-prod
[website-dev]: https://github.com/hege-coin/website-dev
